
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://wayfair-incubator.github.io/dagger/dev/usage-guide/fundamentals/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.6">
    
    
      
        <title>Fundamentals - Dagger Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#usage-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Dagger Documentation" class="md-header__button md-logo" aria-label="Dagger Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dagger Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Fundamentals
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/wayfair-incubator/dagger/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wayfair-incubator/dagger
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Dagger Documentation" class="md-nav__button md-logo" aria-label="Dagger Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Dagger Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/wayfair-incubator/dagger/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wayfair-incubator/dagger
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Usage Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Usage Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Fundamentals
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Fundamentals
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#task-support" class="md-nav__link">
    Task Support
  </a>
  
    <nav class="md-nav" aria-label="Task Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kafkacommandtask" class="md-nav__link">
    KafkaCommandTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kafkalistenertask" class="md-nav__link">
    KafkaListenerTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggertask" class="md-nav__link">
    TriggerTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decisiontask" class="md-nav__link">
    DecisionTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoredtask" class="md-nav__link">
    MonitoredTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallelcompositetask" class="md-nav__link">
    ParallelCompositeTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intervaltask" class="md-nav__link">
    IntervalTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoringtask" class="md-nav__link">
    MonitoringTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensortask" class="md-nav__link">
    SensorTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imonitoredtask" class="md-nav__link">
    IMonitoredTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restful-api" class="md-nav__link">
    RESTful API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-stop-a-workflow" class="md-nav__link">
    How to stop a workflow
  </a>
  
    <nav class="md-nav" aria-label="How to stop a workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-implement-the-stop-method-in-the-task-modeled-in-the-workflow" class="md-nav__link">
    Step 1. Implement the stop method in the task modeled in the workflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-invoke-stop-on-the-workflow-instance" class="md-nav__link">
    Step 2. Invoke stop on the workflow instance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-sections" class="md-nav__link">
    Detailed Sections
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../why-dagger/" class="md-nav__link">
        Why dagger?
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        API Documentation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../development-guide/" class="md-nav__link">
        Development Guide
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#task-support" class="md-nav__link">
    Task Support
  </a>
  
    <nav class="md-nav" aria-label="Task Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kafkacommandtask" class="md-nav__link">
    KafkaCommandTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kafkalistenertask" class="md-nav__link">
    KafkaListenerTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggertask" class="md-nav__link">
    TriggerTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decisiontask" class="md-nav__link">
    DecisionTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoredtask" class="md-nav__link">
    MonitoredTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallelcompositetask" class="md-nav__link">
    ParallelCompositeTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intervaltask" class="md-nav__link">
    IntervalTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoringtask" class="md-nav__link">
    MonitoringTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensortask" class="md-nav__link">
    SensorTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imonitoredtask" class="md-nav__link">
    IMonitoredTask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restful-api" class="md-nav__link">
    RESTful API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-stop-a-workflow" class="md-nav__link">
    How to stop a workflow
  </a>
  
    <nav class="md-nav" aria-label="How to stop a workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-implement-the-stop-method-in-the-task-modeled-in-the-workflow" class="md-nav__link">
    Step 1. Implement the stop method in the task modeled in the workflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-invoke-stop-on-the-workflow-instance" class="md-nav__link">
    Step 2. Invoke stop on the workflow instance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-sections" class="md-nav__link">
    Detailed Sections
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/wayfair-incubator/dagger/edit/main/docs/usage-guide/fundamentals.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="usage-guide">Usage Guide</h1>
<p>This section provides detailed descriptions of how <code>dagger</code> can be used. If you are new to <code>dagger</code>, the
<a href="../../getting-started/">Getting Started</a> page provides a gradual introduction of the basic functionality with examples.</p>
<h2 id="task-support">Task Support</h2>
<p>Tasks are the building blocks to define workflows. <code>dagger</code> supports the following types of tasks:</p>
<h3 id="kafkacommandtask">KafkaCommandTask</h3>
<p>This task is used to send a request/message on a Kafka Topic defined using the template builder. This type of task is a
child task in the execution graph and can be extended by implementing the method</p>
<div class="highlight"><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">runtime_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">workflow_instance</span><span class="p">:</span> <span class="n">ITask</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</code></pre></div>
<h3 id="kafkalistenertask">KafkaListenerTask</h3>
<p>This task waits/halts the execution of the DAG until a message is received on the defined Kafka topic(in the template
definition). Each task is created using the DAG builder defines a durable key to correlate each received message on the
topic against listener tasks. The Engine handles the complexity of invoking the appropriate task instance based on the
key in the payload.</p>
<p>A listener task needs to implement the following methods</p>
<div class="highlight"><pre><span></span><code> <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">runtime_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>  
        <span class="o">...</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">get_correlatable_key_from_payload</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskLookupKey</span><span class="p">:</span>
</code></pre></div>
<p>The <code>get_correlatable_key_from_payload</code> method extracts the key value by parsing the payload received on the Kafka topic.
Using this key <code>dagger</code> looks up the appropriate task from the list of tasks waiting on this event and invokes <code>on_message</code> on each one
of them. The default implementation of this task just sets this task to <code>COMPLETED</code></p>
<p><code>dagger</code> provides the flexibility to implement any other type of listener task by implementing the following interface</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SensorTask</span><span class="p">(</span><span class="n">ITask</span><span class="p">[</span><span class="n">KT</span><span class="p">,</span> <span class="n">VT</span><span class="p">]):</span>
</code></pre></div>
<p>along with a custom <code>TaskTemplateBuilder</code></p>
<h3 id="triggertask">TriggerTask</h3>
<p>This task waits/halts the execution of the DAG until current time &gt;= the trigger time on the task and then invokes
the <code>execute</code> method defined by the task</p>
<p>A trigger task needs to implement the following method</p>
<div class="highlight"><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">runtime_parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">workflow_instance</span><span class="p">:</span> <span class="n">ITask</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Executes the ITask.&quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div>
<p><code>dagger</code> provides a <code>TriggerTaskTemplateBuilder</code> helper to model the task in the DAG.
The <code>set_time_to_execute_lookup_key</code> on this builder is used to define the key to lookup the trigger time provided in
the runtime parameters of the task</p>
<h3 id="decisiontask">DecisionTask</h3>
<p>This type of task is similar to the <code>case..switch</code> statement in a programming language. It returns the next task to
execute based on the execution logic. A decision task needs to implement</p>
<div class="highlight"><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UUID</span><span class="p">]:</span>
    <span class="o">...</span>
</code></pre></div>
<p>This method returns the UUID of the next task to execute in the execution path</p>
<p>The Engine provides a <code>DecisionTaskTemplateBuilder</code> to model a decision task in the DAG</p>
<h3 id="monitoredtask">MonitoredTask</h3>
<p>dagger provides the <code>IMonitoredTask</code> interface which can be implemented on any task to provide a way to monitor that task.
When the monitor is triggered based on a trigger, the <code>process_monitored_task</code> method is invoked on the <code>MonitoringTask</code>.
Dagger comes built in with <code>MonitoredProcessTemplateDAGInstance</code></p>
<h3 id="parallelcompositetask">ParallelCompositeTask</h3>
<p>SUB-DAG Task to execute parallel tasks and wait until all of them are in a terminal state before progressing to the next task
This task can be embedded as a child of the root node or a process node</p>
<h3 id="intervaltask">IntervalTask</h3>
<p>A type of Task to Trigger at a trigger time and execute multiple times until the execution completes. The
task is retried until the timeout is reached periodically after the trigger time</p>
<h3 id="monitoringtask">MonitoringTask</h3>
<p>A Type of TriggerTask that executes at s specific time and checks on the monitored task to execute some
domain specific logic</p>
<h3 id="sensortask">SensorTask</h3>
<p>A type of task that halts execution of the workflow until a condition is met. When the condition is met
the on_message method on this task is invoked</p>
<h3 id="imonitoredtask">IMonitoredTask</h3>
<p>An Abstract interface to enable monitoring of a task. Any Task that implements this interface will need to setup
a MonitoringTask by implementing. Dagger ships with a default implementation using ``</p>
<div class="highlight"><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">setup_monitoring_task</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">workflow_instance</span><span class="p">:</span> <span class="n">ITask</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>
<h3 id="restful-api">RESTful API</h3>
<p>The framework provides a RESTFul API to retrieve the status of root task instances. Root task is the instance created
using the <code>TaskTemplate</code>
which then has multiple, chained ProcessTasks and child tasks(KafkaCommand and KafkaListener tasks)</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="err">h</span><span class="kc">tt</span><span class="err">p</span><span class="p">:</span><span class="c1">//&lt;hostname&gt;:6066/tasks/instances</span>

<span class="w">    </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;child_dags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">            </span><span class="nt">&quot;child_tasks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;child_dags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;89bbf26c-0727-11ea-96e5-0242ac150004&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;89bc1486-0727-11ea-96e5-0242ac150004&quot;</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;correlatable_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;89bbedd0-0727-11ea-96e5-0242ac150004&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;lastupdated&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767727</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;parent_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;89bbe43e-0727-11ea-96e5-0242ac150004&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;process_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PAYMENT&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;runtime_parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;order_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ID000&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;customer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ID000&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;COMPLETED&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Complete&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;task_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NON_ROOT&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;time_completed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767727</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;time_created&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767624</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;time_submitted&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767698</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;child_dags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;89bc3984-0727-11ea-96e5-0242ac150004&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;89bc482a-0727-11ea-96e5-0242ac150004&quot;</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;correlatable_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;89bc35f6-0727-11ea-96e5-0242ac150004&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;lastupdated&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767727</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;parent_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;89bbe43e-0727-11ea-96e5-0242ac150004&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;process_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SHIPPING&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;runtime_parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;order_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ID000&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;customer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ID000&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EXECUTING&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Executing&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;task_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NON_ROOT&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;time_completed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;time_created&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767624</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;time_submitted&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767727</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;correlatable_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;89bbe43e-0727-11ea-96e5-0242ac150004&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;lastupdated&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767624</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;parent_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;runtime_parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;order_number&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ID000&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;customer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ID000&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;EXECUTING&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Executing&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;task_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ROOT&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;time_completed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;time_created&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767624</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;time_submitted&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1573767698</span>
<span class="w">        </span><span class="p">}]</span>
</code></pre></div>
<h2 id="how-to-stop-a-workflow">How to stop a workflow</h2>
<h3 id="step-1-implement-the-stop-method-in-the-task-modeled-in-the-workflow">Step 1. Implement the stop method in the task modeled in the workflow</h3>
<div class="highlight"><pre><span></span><code>    <span class="k">async</span> <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Stop called&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="step-2-invoke-stop-on-the-workflow-instance">Step 2. Invoke stop on the workflow instance</h3>
<div class="highlight"><pre><span></span><code>    <span class="n">workflow_instance</span><span class="p">:</span> <span class="n">ITemplateDAGInstance</span> <span class="o">=</span> <span class="k">await</span> <span class="n">dagger_instance</span><span class="o">.</span><span class="n">get_instance</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">workflow_id</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">workflow_instance</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div>
<p>This will invoke <code>stop</code> on tasks in <code>EXECUTING</code> state</p>
<h2 id="detailed-sections">Detailed Sections</h2>
<ul>
<li><a href="../../getting-started/">getting-started</a></li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../getting-started/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Getting Started" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Getting Started
            </div>
          </div>
        </a>
      
      
        
        <a href="../../why-dagger/" class="md-footer__link md-footer__link--next" aria-label="Next: Why dagger?" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Why dagger?
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>